import{c as C,u as N,g as T,b as S,d as j,e as L,f as q,r as h,j as n,a as s,h as P,C as z,O as F}from"./index.8f9897ef.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=C("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),O=({organization:c,repository:o,enabled:r})=>N({queryKey:["tags",c,o],retry:0,queryFn:async({queryKey:[,i,l]})=>(await T({organization:i,repository:l})).slice(-15).reverse(),enabled:r,refetchOnWindowFocus:!1}),f="selected";function V(){var p;const{organization:c,repository:o}=S(),[r,i]=j(),l=L(),b=q(),[d,y]=h.exports.useState(((p=r.get(f))==null?void 0:p.split(","))||[]),{data:a,isLoading:g,isError:x}=O({organization:c,repository:o,enabled:!!c&&!!o}),v=h.exports.useCallback((e,m)=>()=>{let t=[...d];m?t.push(e):t=t.filter(k=>k!==e),y(t),t.length>0?i({[f]:t.join(",")}):i()},[d]),w=h.exports.useCallback(e=>{l({pathname:e,search:r.toString()})},[b]),u=({children:e,onClick:m})=>s("p",{onClick:m,className:"hover:bg-muted flex-1 cursor-pointer whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 text-secondary-foreground shadow-sm hover:bg-muted/80 h-9 px-3 py-2 w-full",children:e});return n("div",{className:"flex h-full",children:[n("div",{className:"space-y-4 w-56 max-h-max",children:[n("div",{className:"mb-2 mr-4 flex justify-between items-center",children:[s("h2",{className:"text-lg font-semibold tracking-tight",children:"Tags"}),s("button",{className:"text-base hover:text-primary bg-muted rounded-full px-3 py-2",onClick:()=>l({pathname:"selected",search:r.toString()}),children:"compare"})]}),g&&s(u,{children:s(P,{})}),n("div",{className:"mr-4",children:[x&&s(u,{children:"unable to fetch tags"},"error"),a&&(a==null?void 0:a.map(e=>n("div",{className:"justify-between flex items-center mb-2 gap-2",children:[s(u,{showCheckmark:!0,onClick:()=>{w(e.name)},children:e.name}),s("button",{onClick:v(e.name,!d.includes(e.name)),children:d.includes(e.name)?s(K,{}):s(z,{})})]},e.name))),!g&&a&&a.length===0&&s(u,{children:"No tags"},"no-tags")]})]}),s("div",{className:"grow w-100 h-100 px-4",children:s(F,{})})]})}export{V as default,f as selectedTagsKey};
